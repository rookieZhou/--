# 2014年7月2日，7月3日 工作日志

## 需求 

前端（原生和Mcart)激活新客券，用户类型不符，给出对应的提示

场景1：小明参加线下推广活动，获得一张新客券。在个人中心页面，他进入`优惠券`列表页，点击激活按钮，输入新客券的激活码

场景2：小明参加线下推广活动，获得一张新客券。在购物车页面，他点击使用礼券，在优惠券列表页，点击激活按钮，输入新客券的激活码

后端在原有的券的判断基础上，判断券的类型时，如果是新客券，增加判断用户类型：小明判断为B类用户，其他条件都满足，停留在优惠券列表页，显示激活成功提示，新激活的券排在最上面；小明判断为C类用户，其他条件都满足，停留在优惠券列表页，激活失败，给予相应的错误提示“激活失败：抱歉，您不符合优惠券的激活条件”；（该提示为中间层可配置）




## 需求分析

	输入客券的窗口？

A 类没有登录,进不了登录中心。无法处理逻辑［不用修改］ 

B 类 登录后没有购买记录的用户

C 类 登录有购买记录的用户

	是优惠券还是代金券还是礼品卡？

是优惠券。有`优惠券`列表这一说法。说明新客券是属于优惠券一部分的。

	是否是新客券，是否是新注册已经登录没有购买记录的用户［B类用户］的逻辑是客户端判断还是服务器判断？
	
是中间层判断不是客户端判断。［一定要判断清楚业务逻辑所属的负责层］

## Coding

VSVoucherViewController_iPad

VSActivateCoupon

	- (void)requestCompleted:(VSRequest *)request response:(VSResponse *)response {
		
	}

## Bug

	iOS 8 无法有这个优惠输入窗口

方案1 :下载iOS 7.1,选择菜单上的模拟器，更多模拟器,Deployment Target 设置7.0以上报错,失败。

方案2 :下载Xcode5.1

	Applications including an arm64 slice are not compatible with versions of iOS prior to 5.1.1

210438692123789abc

## 搜索词不要太庞大的主题

## 二次加工

所谓二次加工指的是中间层的加工，不是客户端的二次加工











